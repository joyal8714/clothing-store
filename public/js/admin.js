document.addEventListener('DOMContentLoaded',()=>{const t=document.getElementById("current-products-grid"),e=async()=>{try{const e=await fetch(`/api/products?t=${(new Date).getTime()}`),o=await e.json();c(o)}catch(d){console.error("Error loading products:",d)}},c=e=>{let c="";e.sort((a, b) => e.indexOf(b) - e.indexOf(a)).forEach(t=>{c+=`<div class="admin-product-item"><img src="${t.images[0]}" alt="${t.title}"><div class="admin-product-info"><h4>${t.title}</h4><p>â‚¹${t.price} (${t.category})</p></div><button class="delete-btn" data-id="${t._id}">Delete</button></div>`}),t.innerHTML=c};t.addEventListener("click",async t=>{if(t.target.classList.contains("delete-btn")){const o=t.target.dataset.id;if(confirm("Are you sure you want to delete this product?"))try{const t=await fetch(`/api/products/${o}`,{method:"DELETE"});t.ok?e():alert("Error deleting product.")}catch(c){console.error("Failed to delete product:",c)}}}),e()});
